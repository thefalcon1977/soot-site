<!--Top Header: Logo and Search -->
{% load thumbnail i18n %}

<!-- Navbar -->
<header class="custom-header">
    <div class="header-container">
      <!-- Logo (right side in RTL) -->
      <div class="header-logo">
        <i class="fal fa-bars"></i>
        <a href="{% url 'pages:home' %}">
          {% thumbnail site_content.site_logo "150x70" crop="center" format='WEBP' as logo %}
            <img src="{{ logo.url }}" alt="{{ site_content.brand_name }}" class="img-fluid" style="max-height:48px;">
          {% endthumbnail %}
        </a>
      </div>
      <!-- Search Bar -->
      <form action="{% url 'pages:blog-post-list' %}" method="get" class="header-search-form" role="search">
        <input type="text" name="search" class="header-search-input" placeholder="{% trans 'جستجو ' %}" value="{{ request.GET.search|default_if_none:'' }}">
        <button type="submit" class="header-search-btn">
          <i class="fa fa-search"></i>
        </button>
      </form>
      <!-- Action Buttons -->
      <div class="header-actions">

        <a href="{% url 'pages:live-stream-list' %}" class="header-login-btn">
          <i class="fal fa-broadcast-tower me-2"></i>
          {% if live_stream_count > 0 %}
            <span class="badge bg-danger ms-1">{{ live_stream_count }}</span>
          {% endif %}
        </a>

        <a href="{% url 'pages:login' %}" class="header-login-btn">
          <i class="fa fa-user"></i> ورود
        </a>
      </div>
    </div>
  </header>

<!-- Right Sidebar Menu (Desktop Only) -->
<nav class="desktop-sidebar-nav d-none d-lg-block">

    <a href="{% url 'pages:home' %}" class="nav-item{% if request.resolver_match.url_name == 'home' %} active{% endif %}">
        <i class="fal fa-home me-2"></i>
        <span>{% trans "Home" %}</span>
    </a>

    <a href="{% url 'pages:blog-post-list' %}" class="nav-item{% if 'blog' in request.resolver_match.url_name %} active{% endif %}">
            <i class="fal fa-blog me-2"></i>
            <span>{% trans "Blog" %}</span>
    </a>

    <a href="{% url 'pages:gallery-list' %}" class="nav-item{% if request.resolver_match.url_name == 'gallery-list' %} active{% endif %}">
            <i class="fal fa-images me-2"></i>
            <span>{% trans "Gallery" %}</span>
    </a>

    <a href="{% url 'pages:live-stream-list' %}" class="nav-item{% if 'live-stream' in request.resolver_match.url_name %} active{% endif %}">
        {% if live_stream_count > 0 %}
            <span class="badge bg-danger ms-1">{{ live_stream_count }}</span>
        {% endif %}
        <i class="fal fa-broadcast-tower me-2"></i>
        <span>{% trans "Live" %}</span>
    </a>

    <a href="{% url 'pages:contact' %}" class="nav-item{% if request.resolver_match.url_name == 'contact' %} active{% endif %}">
            <i class="fal fa-envelope me-2"></i>
            <span>{% trans "Contact Us" %}</span>
        </a>

    {% if not request.user.is_authenticated %}
        <a href="{% url 'pages:login' %}" class="nav-item">
            <i class="fal fa-sign-in me-2"></i>
            <span>{% trans "Login" %}</span>
        </a>

    {% else %}
        <a href="{% url 'pages:logout' %}" class="nav-item">
            <i class="fal fa-sign-out me-2"></i>
            <span>{% trans "Logout" %}</span>
        </a>
    {% endif %}
</nav>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav d-lg-none">
    <a href="{% url 'pages:home' %}" class="nav-item{% if request.resolver_match.url_name == 'home' %} active{% endif %}">
        <i class="fal fa-home"></i>
        <span>{% trans "Home" %}</span>
    </a>
    <a href="{% url 'pages:blog-post-list' %}" class="nav-item{% if 'blog' in request.resolver_match.url_name %} active{% endif %}">
        <i class="fal fa-blog"></i>
        <span>{% trans "Blog" %}</span>
    </a>
    <a href="{% url 'pages:live-stream-list' %}" class="nav-item{% if 'live-stream' in request.resolver_match.url_name %} active{% endif %}">
        <i class="fal fa-broadcast-tower"></i>
        <span>{% trans "Live" %}</span>
        {% if live_stream_count > 0 %}
            <span class="badge bg-danger">{{ live_stream_count }}</span>
        {% endif %}
    </a>
    <a href="{% url 'pages:gallery-list' %}" class="nav-item{% if request.resolver_match.url_name == 'gallery-list' %} active{% endif %}">
        <i class="fal fa-images"></i>
        <span>{% trans "Gallery" %}</span>
    </a>
    <a href="{% url 'pages:contact' %}" class="nav-item{% if request.resolver_match.url_name == 'contact' %} active{% endif %}">
        <i class="fal fa-envelope"></i>
        <span>{% trans "Contact" %}</span>
    </a>

</nav>

