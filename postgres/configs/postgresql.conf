# DB Version: 14 (adjusted to match logs)
# OS Type: linux
# DB Type: web
# Total Memory (RAM): 2 GB
# CPUs num: 1
# Connections num: 100
# Data Storage: ssd

# JIT (disable for small systems)
jit = off

# Port Configuration
port = 5438
listen_addresses = '*'
max_connections = 100

# Memory Configuration
shared_buffers = 128MB              # ~1/16 of RAM, conservative for 2 GB
effective_cache_size = 384MB        # ~3/8 of RAM
work_mem = 1MB                     # Low to support 100 connections
maintenance_work_mem = 32MB        # Moderate for maintenance tasks

# Checkpoint Configuration
min_wal_size = 80MB                # Reasonable for small system
max_wal_size = 1GB                 # Larger than min_wal_size
checkpoint_completion_target = 0.9
wal_buffers = -1                   # Auto-tuned

# Storage Configuration
random_page_cost = 1.1             # Good for SSD
effective_io_concurrency = 200     # Suitable for SSD

# Worker Processes
max_worker_processes = 1           # Match CPU count
max_parallel_workers_per_gather = 0 # Disable parallelism for single CPU
max_parallel_workers = 0           # Disable parallelism

# Logging for pgbadger
logging_collector = on
log_destination = 'csvlog'
log_checkpoints = on
log_connections = on
log_disconnections = on
log_lock_waits = on
log_temp_files = 0
lc_messages = 'C'
log_min_duration_statement = 10000 # 10s in milliseconds
log_autovacuum_min_duration = 0